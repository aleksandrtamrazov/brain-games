#!/usr/bin/env php

<?php

$autoloadPath1 = __DIR__ . '/../../../autoload.php';
$autoloadPath2 = __DIR__ . '/../vendor/autoload.php';

if (file_exists($autoloadPath1)) {
	require_once $autoloadPath1;
} else {
	require_once $autoloadPath2;
}

use function cli\line;
use function cli\prompt;
use function Php\Project\Cli\isEven;

line('Welcome to the Brain Game!');
$name = prompt('May I have your name?');
line("Hello, %s!", $name);line('Answer "yes" if the number is even, otherwise answer "no".');
for($i = 0; $i < 3; $i++) {
  $number = rand(1, 15);
  $question = "Question: {$number}";
  $currectAnswer = isEven($number) ? "yes" : "no";

  $answer = prompt($question);
  if ((isEven($number) && $answer === 'yes') || (!isEven($number) && $answer === "no")) {
    if ($i == 2) {
      line('Congratulations, %s!', $name);
    } else {
      line('Your answer: %s', $answer);
      line('Correct!');
      continue;
    } 
  } else {
    line("'%s' is wrong answer ;(. Correct answer was '%s'.Let's try again, %s!", $answer, $currectAnswer, $name);
    break;
  }
}
